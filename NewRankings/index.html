<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>New Rankings</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="../blog.css" />
  <link rel="stylesheet" href="../code/bootstrap.min.css">
  <script src="../code/jquery.min.js"></script>
  <script src="../code/bootstrap.min.js"></script>

  <ul class="bar">
    <li class="barli"><a class="active" href="/">Home</a></li>
    <li class="barli"><a href="/sportsMaths/">Triathlon Mathematics</a></li>  
    <!-- <li class="barli"><a href="https://abiswas3.github.io/differentialprivacy.github.io">Notes on Differential Privacy</a></li> -->
  </ul>

  <script src="../code/es5/tex-chtml.js"
  type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">New Rankings</h1>
</header>
<div class="container">
<div class="important">
<strong><u>Disclaimer</u></strong>: I am not an athlete nor can I claim
to be a hardcore triathlon fan. I am not directly affected by the
outcome of different ranking strategies, financially or spiritually. My
interest in the problem is purely from an algorithmic game theory
standpoint. Ranking strategies often lead to pathological behaviours (<a
href="https://youtu.be/TM_QFmQU_VA?t=494">see</a> for an example).
Understanding and analysing the mathematical underpinnings of such
behaviour is a personal research interest. Note as these systems
represent rank actual people with feelings and were developed by a
different set of humans (also with feelings), I have tried to remain as
neutral as possible in my discourse. In the off chance someone is
offended, I apologise.
</div>
<h2 id="recap">Recap</h2>
<p>In 2020, the PTO deployed a system for ranking triathletes which many
perceived to be complicated and unfair<a href="#fn1"
class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. <a
href="https://abiswas3.github.io/sportsMaths/ProblemStatement/index.html">See</a>
for a refresher. At the heart of this ranking malarky lies a simple
question – “How do you compare the performance of two athletes who did
not race each other on the same day?”. One cannot sort two performances
by finish time as they vary across courses. The problem is not unique to
triathlon either. This question has plagued social choice theory since
the 1950s, so it’s unlikely any proposed solution will resolve all
outstanding issues. Similar measurement issues arise in marathon
running, tennis, chess, golf and many other sports. Thus, the PTO
employed a committee of athletes, who after a year of discussion and
deliberation, came up with a new system that resolves this question in
fair manner. A key motif behind doing over the old system was to
simplify how ranking points were calculated and to re-align the rankings
to better represent the athlete values.. <a
href="https://protriathletes.org/pto-world-ranking-system/">A clear
description of the new system can be found here</a> and thus there is no
need to go over the details again.</p>
<p>At this point, as far as the PTO is concerned, this ranking problem
appears solved. The athletes were affected by the rankings, and they
decided to devise a system that prioritised their interests. The people
decided for the people, and democracy won and as Bernard Shaw famously
stated – “Democracy is a device that ensures we shall be governed no
better than we deserve.” Thus this manuscript, unlike its predecessors
does not try to propose an alternate system. It simply tries to model
the consequences of such a system. The remainder of this document is
written from the perspective of an imaginary triathlete Bob, who isn’t
that great at swim, bike or run. However, much like his namesake<a
href="#fn2" class="footnote-ref" id="fnref2"
role="doc-noteref"><sup>2</sup></a>, Bob will look to lie and cheat to
find ways to boost his ranking. In other words, what is the maximum
triathlon ranking Bob can get without actually investing any time in
being good at triathlon?</p>
<!-- The hope is that the search for Bob's strategies will highlight the -->
<!-- pathological tendencies of the new ranking system. It should not be -->
<!-- read as a critique of the current system. All ranking systems (even -->
<!-- provably optimal ones) lead to unavoidable social -->
<!-- situations. Typically a group of humans will look at the odds of that -->
<!-- situation arising and accept it as an unavoidable risk. Bob's attacks -->
<!-- might be shown to be improbable, and that should strengthen the trust -->
<!-- in the new system. -->
<h2 id="the-new-system">The New System</h2>
<p>From the outset it would appear that the new system considers a
diverse set of facets of a race and then weight them to compute a final
score. However, closer examination of the point system reveals that the
new system is really based around one central concept – the committees’
definition of strength of field. There are 3 ways to accumulate points
during a triathlon race, namely:</p>
<ul>
<li><p><strong>Finishing higher up in big races</strong> – akin to how
winning the Olympic gold should matter more than winning your local park
run. The Bigness of a race is determined by the athletes, race
organisers and how much cash is up for grabs. There are five types of
races, each with a base score and a drop-off rate. Let <span
class="math inline">\(b\)</span> be the base score and <span
class="math inline">\(r\)</span> be the drop off rate for a type of
race. Then the winner gets <span class="math inline">\(b\)</span>
points, the next athlete is <span class="math inline">\(r\%\)</span>
lower than the person ahead of them. The group scores are as
follows:</p>
<ul>
<li>Diamond: (100, 2)</li>
<li>Platinum: (95, 2)</li>
<li>Gold: (90, 5)</li>
<li>Silver: (80, 8)</li>
<li>Bronze (70, 11)</li>
</ul></li>
<li><p><strong>Race the best to be the best</strong> – Each race has a
strength of field (SOF) score which is meant to reflect hardness to win.
The higher the SOF the harder it is to win this race. Regardless of your
final race position, if you took part in this race, you get an additive
offset of <span class="math inline">\(0.3*SOF\)</span> added to your
final score. The SOF score is just the average of the PTO rank score for
the top 5 athletes that start the race.</p></li>
<li><p><strong>Finishing unreasonably quickly should be
rewarded</strong> – Finish time is not a reliable metric in comparing
across different races. Wind, road surface, rain, heat, hills are some
of the miscellaneous factors that act as counterfactuals that bias time.
However, if you ask athletes, they’ll often tell you words like
<em>“That’s a really fast time for this course”</em>. So, very
believably, they have instinctive feel for what is fast or a superhuman
performance. They would like to reward an athlete for such a
performance. They do so by calculating how much faster (or slower) an
athlete went from a base time (quite similar to AIT) as a percentage. So
if the base time was 100s and I complete the race 104s. Then I went 4%
faster and for every 1% I went faster I get an additional 6 bonus points
on top of the baseline points.</p></li>
</ul>
<p>Finally they take the score from each category and add them up with
different weights. Shown below is a screen grab from <a
href="https://www.triathlete.com/culture/news/new-2023-pto-rankings-revealed-dissected/">this
article</a> which goes over the arithmetic.</p>
<figure>
<img src="pngs/Screenshot%202023-02-17%20at%2012.04.48.png"
alt="An illustration of how points are calcuated" />
<figcaption aria-hidden="true">An illustration of how points are
calcuated</figcaption>
</figure>
<!-- PS: There is a harmless arithmetic error in the [PTO Website -->
<!-- description](https://protriathletes.org/pto-world-ranking-system/) -->
<!-- ``` -->
<!-- An athlete’s final Race Time Score is calculated by starting with the Baseline Score and adding or deducting 6 points for every 1% that they’re faster or slower than the Baseline Time. An athlete’s Race Time Score cannot fall below 0 regardless of how far behind the Baseline Time they finish a race -->
<!-- ``` -->
<!-- And then they work out an example: -->
<!-- ![[pngs/Screenshot 2023-02-17 at 12.12.22.png]] -->
<!-- $Base = 3:58:17$ -->
<!-- First finisher $= 3:44:40$ -->
<!-- They are faster than baseline should be  $\frac{| Base - finish|}{Base}$ but instead $\frac{| Base - finish|}{finish}= 6.06\%$. The error is harmless as everything is linear, and it shouldn't matter that much :-)   -->
<h2 id="the-weights-do-not-matter">The weights do not matter</h2>
<p>Although the final score is claimed to be a mixture of three
different features (position, strength of field and time); this is
merely an illusion. The three features are highly correlated, and as a
result only one feature really matters – strength of field. Let <span
class="math inline">\(T\)</span> represent the points awarded based on
the finish position given the race tier. Let <span
class="math inline">\(SOF\)</span> represent the pre-determined SOF for
a race.</p>
<figure>
<img src="pngs/plot1.png"
alt="The figure above plots the tier on the Y-axis and the SOF on the X-axis. It is easy to see that the two are positively correlated. For a fixed tier, one might observe that the SOF has enormous variance (we will get to this later) but if you do well in a high tiered race, you will almost always do well in the SOF category as well. This makes sense – The tiering of a race is based on prize money and prestige, and thus the best athletes end up wanting to participate." />
<figcaption aria-hidden="true">The figure above plots the tier on the
Y-axis and the SOF on the X-axis. It is easy to see that the two are
positively correlated. For a fixed tier, one might observe that the SOF
has enormous variance (we will get to this later) but if you do well in
a high tiered race, you will almost always do well in the SOF category
as well. This makes sense – The tiering of a race is based on prize
money and prestige, and thus the best athletes end up wanting to
participate.</figcaption>
</figure>
<p>Let <span class="math inline">\(T\)</span> represent the position
based tier score for an athlete and <span
class="math inline">\(SOF\)</span> represent the strength of field for
the given race. The timing feature is supposed to reward an athlete
based on the difference between their time and the time of the top
finishers. Let <span class="math inline">\(\Delta\)</span> represent
this time difference<a href="#fn3" class="footnote-ref" id="fnref3"
role="doc-noteref"><sup>3</sup></a>. The score for finishing really fast
is determined as <span class="math inline">\(0.3(B + \Delta)\)</span>,
where <span class="math inline">\(B = (T_1 + SOF)/2\)</span>, where
<span class="math inline">\(T_1\)</span> is the tier score of the
winner. <strong>Note <span class="math inline">\(B\)</span> has nothing
to do with your actual performance. <span
class="math inline">\(B\)</span> is determined even before the race
starts.</strong></p>
<p>Thus the final score <span class="math inline">\(S\)</span></p>
<p><span class="math display">\[\begin{align}
S &amp;= 0.4\times T + 0.3\times SOF + 0.3(B + \Delta) \\
&amp;= 0.4\times T + 0.3\times SOF + 0.3((T_1 + SOF)/2 + \Delta) \\
&amp;= 0.4\times T + 0.3\times SOF + 0.15\times T_1 + 0.15\times SOF +
0.3\times\Delta \\
&amp;= 0.4\times T + 0.3\times\Delta + (0.45\times SOF + 0.15 T_1)
\end{align}\]</span></p>
<p>We already know that <span class="math inline">\(T_1\)</span> and
<span class="math inline">\(SOF\)</span> are high for the big races.
Even <span class="math inline">\(T\)</span> is biased towards the big
races. So if you’re an upcoming new athlete participating in a local
race because you cannot afford to go to Europe all the time, then <span
class="math inline">\(\Delta\)</span> is the only lever which gives you
any control over your final score. So how much can you squeeze out of
<span class="math inline">\(\Delta\)</span>? Observe the plot below
which shows <span class="math inline">\(\Delta\)</span> (X-axis) as a
function of race finish position (Y-axis) for different tiered races <a
href="#fn4" class="footnote-ref" id="fnref4"
role="doc-noteref"><sup>4</sup></a></p>
<figure>
<img src="pngs/plot2.png"
alt="The biggest difference an athlete made by virtue of finishing further ahead of second place is about 10pts. An that 10pts is a rare event. On average the races are tight and the gains are few and far between. So most of the time, an athlete makes about 2-3 pts by winning a race outright. When you weigh this against the other features, it has negligible contribution in ranking." />
<figcaption aria-hidden="true">The biggest difference an athlete made by
virtue of finishing further ahead of second place is about 10pts. An
that 10pts is a rare event. On average the races are tight and the gains
are few and far between. So most of the time, an athlete makes about 2-3
pts by winning a race outright. When you weigh this against the other
features, it has negligible contribution in ranking.</figcaption>
</figure>
<h2 id="the-times-they-are-a-changin">The Times, They Are A Changin</h2>
<p>As mentioned in the disclaimer, the goal of this document was to
really understand the incentives of the new ranking system. First thing
to note is that the way triathlon dealt with the problem of comparing
performances across different courses is to do away with the problem in
the first place. The incentives are clear – “to be the best, athletes
must race the best”. If everyone showed up for the races, ranking
athletes is a trivial from a mathematical perspective. If you’re an
established pro athlete this seems to be the fairest possible system.
None of that <span class="math inline">\(AIT\)</span> malarkey and none
of that convex optimisation <a
href="https://abiswas3.github.io/sportsMaths/PrimoRank/">ELO</a> scores
either. Simple and Straight – that’s what everyone wanted.</p>
<p>In fact this is not even the first time such a model has been used in
pro sport. Tennis<a href="#fn5" class="footnote-ref" id="fnref5"
role="doc-noteref"><sup>5</sup></a> and Golf rankings are very similar
in essence. Win Wimbledon and all the glory is yours. There is one issue
however. The economics of triathlon and tennis are not the same. Your
neighbour, local Bob, does not step out onto the grass courts of
Wimbledon with Novak Djokovic. However, they do pay an exorbitant amount
of money to ride up and down the high streets of Bolton with Lucy
Charles Barclay. By putting all the ranking eggs in the PTO and
championship races, your local Bob might not enjoy as much pro time. As
more cash flows into the system, it seems like Triathlon is headed
towards more mainstream sports, where the pro’s live a distinctive
different life from the amateurs. I guess this is necessary for any
sport to grow economically ?!? I cannot say, I am not an economist. I’m
also not sure how this affects an upcoming pro who is low on funds or
athletes that are not from the EU/USA. There is definitively less value
in racing smaller races now. <a
href="https://twitter.com/Timheming/status/1627706043579916288?s=20">Journalists
have also noted</a> that the sports focus is really on the top athletes
and making sure they are fairly compensated.</p>
<p>All in all, I do not have an opinion on the social implications of
such changes. The mathematical problem is no longer so interesting. All
things change, and triathlon seems to be in transition.</p>
<h2 id="other-miscellaneous-observations">Other Miscellaneous
Observations</h2>
<ul>
<li><p>There are few other things that stood out. The choice of top 5
for SOF seemed rather arbitrary. It is perhaps why there is such a high
variance in the strength of field even across the same tiers of races.
Perhaps a smoothing function or something more robust to outliers like
median would have made more sense. My guess is 5 seemed like a good fair
number and was picked heuristically.</p></li>
<li><p>Similarly, the calculation for <span
class="math inline">\(\Delta\)</span> seems ad hoc. There are cases
where the Base time is calculated using just the winners time. In that
case the winner by definition cannot get any positive <span
class="math inline">\(\Delta\)</span> points and everyone else gets
negative points. However, as the final rankings are a function of top 3
performances, giving others negative points does not help an athlete.
Those athletes might as well drop this performance and do well somewhere
else. However the athlete that indeed won the race got nothing from
winning the race. In the cases where <span
class="math inline">\(\Delta\)</span> is calculated from a base line
time of top 3-5 times, this issue is still prevalent as the winning
athletes time offsets the baseline. As shown in the plots above, it
could be why it makes so little difference to an athletes final
score.</p></li>
</ul>
</div>
<section class="footnotes footnotes-end-of-document"
role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>Searching for PTO rankings on Twitter
should<a href="#fnref1" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p><a
href="https://www.thedailybeast.com/bob-dylan-why-we-can-never-know-him">Lies,
God-damned lies and Bob Dylan</a><a href="#fnref2" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p>More specifically, <span
class="math inline">\(\Delta\)</span> is the fraction the athlete was
off from the averagae performance of the top 5 athletes times 6.<a
href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4" role="doc-endnote"><p>PTO canadian open is not included in
the results as the website does not report SOF for the women’s field. As
I have a generic webscraper that pulls this data from the PTO website, I
could not be arsed to manually fix this.<a href="#fnref4"
class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5" role="doc-endnote"><p>If I remember correctly, this was an
intentional goal for the PTO. To make triathlon more like the ATP or WTA
circuit.<a href="#fnref5" class="footnote-back"
role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
<div id="footer">
   All models are wrong, but some are useful
</div>
</body>
</html>
